
upstream piremote {
        server unix:/tmp/piblaster3.sock fail_timeout=0;
}

server {
        listen 80;
        server_name pi.blaster;
        access_log off;

        # required for MP3 upload
        client_max_body_size 50M;

        # Enable direct access to static files via web server if
        # static dir is visible by nginx.
        location /piremote/static {
                alias /opt/PiBlaster3/piremote/static;
        }

        location /piremote {
                include /etc/nginx/uwsgi_params;
                uwsgi_pass piremote;
        }

        location /piadmin {
                auth_basic "Restricted Content";
                auth_basic_user_file /opt/PiBlaster3/conf/htpasswd;
                include /etc/nginx/uwsgi_params;
                uwsgi_pass piremote;
        }

        location /music {
            alias /var/lib/mpd/music;
            disable_symlinks off;
        }

        root /var/www/html;
        index index.html index.htm index.nginx-debian.html;
}
